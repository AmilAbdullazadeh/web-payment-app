{"ast":null,"code":"var _jsxFileName = \"/Users/amilabdullayev/Desktop/Projects/web-payment-app/front/src/screens/FormScreen.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Col, Container, Form, Row, Button } from \"react-bootstrap\";\nimport Message from \"../components/Message\";\nimport Receipt from \"../components/Receipt\";\nimport { CategoryListContext } from \"../contexts/CategoryListContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction FormScreen({\n  match,\n  history\n}) {\n  _s();\n\n  const categoryId = match.params.categoryId;\n  const providerId = match.params.providerId;\n  const [field, setField] = useState();\n  const [providers, setProviders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null); // form\n\n  const [number, setNumber] = useState('');\n  const [exp_month, setExpMonth] = useState('');\n  const [exp_year, setExpYear] = useState('');\n  const [cvv, setCvv] = useState('');\n  const [value, setValue] = useState('');\n  const [currency, setCurrency] = useState('');\n  const [datas, setDatas] = useState({});\n  const [validated, setValidated] = useState(false);\n  const [isSubmit, setIsSubmit] = useState(false);\n  const [dataRequest, setDataRequest] = useState({});\n  const [dataReceipt, setDataReceipt] = useState({});\n  const [showReceipt, setShowReceipt] = useState(false); // context api\n\n  const categoryList = useContext(CategoryListContext);\n  useEffect(() => {\n    try {\n      //  check local storage data\n      const localData = JSON.parse(localStorage.getItem('categoryListStorage'));\n\n      if (localData !== undefined && localData !== null) {\n        const categoryFiltered = localData.filter(category => category.id === +categoryId);\n        setProviders(categoryFiltered[0].providers);\n        const providerFiltered = providers.filter(provider => provider.id === +providerId);\n        setField(providerFiltered[0]); // setIsSubmit(true);\n        // setShowReceipt(true);\n        // setDataReceipt(localData);\n      } else {\n        history.push('/');\n      }\n    } catch (error) {\n      console.error(error);\n      setError(error);\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, error, isSubmit, showReceipt]);\n\n  const fieldChanged = (key, value) => {\n    setDatas(currentValues => {\n      currentValues[key] = value;\n      return currentValues;\n    }); // for (const [key, value] of Object.entries(datas)) {\n    //     setKeyData(currentValues => {\n    //         currentValues = {\n    //             k: currentValues[key],\n    //             v: value\n    //         }\n    //         return currentValues;\n    //     });\n    // }\n    // console.info('keyData', keyData);\n  };\n\n  const handleSubmit = event => {\n    setIsSubmit(true);\n    const form = event.currentTarget;\n\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      event.preventDefault();\n      const data = [{\n        providerId: providerId,\n        fields: datas,\n        amount: {\n          value: value,\n          currency: currency\n        },\n        card: {\n          number: number,\n          exp_month: exp_month,\n          exp_year: exp_year,\n          cvv: cvv\n        }\n      }];\n      setDataRequest(data); // // for generate id\n      // const generateRandomString = (length = 10) => Math.random().toString(20).substr(2, length)\n      // let randomId = generateRandomString(200);\n      //\n      // // yyyy-MM-ddTHH:mm:ss\n      // let date_ob = new Date();\n      // // adjust 0 before single digit date\n      // let date = (\"0\" + date_ob.getDate()).slice(-2);\n      // // current month\n      // let month = (\"0\" + (date_ob.getMonth() + 1)).slice(-2);\n      // // current year\n      // let year = date_ob.getFullYear();\n      // // current hours\n      // let hours = date_ob.getHours();\n      // // current minutes\n      // let minutes = date_ob.getMinutes();\n      // // current seconds\n      // let seconds = date_ob.getSeconds();\n      //\n      // const dateNow = `${year}-${month}-${date}T${hours}:${minutes}:${seconds}`;\n      //\n      // const receipt = {\n      //     id: randomId,\n      //     date: dateNow,\n      //     details: datas,\n      //     amount: {\n      //         value: value,\n      //         currency: currency\n      //     }\n      // }\n\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(dataRequest)\n      };\n      fetch(\"http://localhost:8080/payments/new\", requestOptions).then(response => response.json()).then(data => {\n        console.log(data);\n        setDataReceipt(data); //  check local storage data\n\n        const localData = JSON.parse(localStorage.getItem('categoryListStorage'));\n\n        if (localData !== undefined && localData !== null) {\n          localStorage.setItem('categoryListStorage', JSON.stringify(data));\n          setCategories(localData);\n        } // local storage\n\n\n        localStorage.setItem('categoryListStorage', JSON.stringify(data));\n        setCategories(data);\n      }).catch(error => {\n        console.error(error);\n        setError(error);\n      }).finally(() => setLoading(false)); // local storage\n\n      localStorage.setItem('receiptStorage', JSON.stringify(receipt)); // eslint-disable-next-line no-unused-expressions\n\n      dataReceipt !== undefined && dataRequest !== undefined ? setShowReceipt(true) : setShowReceipt(false);\n    }\n\n    setValidated(true);\n  };\n\n  const handleBack = () => {\n    const localeData = JSON.parse(localStorage.getItem('receiptStorage'));\n\n    if (localeData !== undefined || true) {\n      localStorage.removeItem('receiptStorage');\n      setIsSubmit(false);\n      setShowReceipt(false);\n    }\n\n    history.push('/');\n  };\n\n  if (loading) return \"Loading...\";\n  if (error) return /*#__PURE__*/_jsxDEV(Message, {\n    variant: \"danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleBack,\n      className: \"btn btn-light my-3\",\n      children: \"Go back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this), isSubmit && showReceipt ? /*#__PURE__*/_jsxDEV(Receipt, {\n      dataReceipt: dataReceipt\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 45\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        noValidate: true,\n        validated: validated,\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: 12,\n            md: 6,\n            lg: 4,\n            xl: 4,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-container\",\n              children: [field && field.fields.map((f, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: f.label\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 57\n                  }, this), f.type === 4 ? /*#__PURE__*/_jsxDEV(Form.Control, {\n                    name: f.id,\n                    as: \"select\",\n                    required: true,\n                    onChange: e => fieldChanged(f.id, e.target.value),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 73\n                    }, this), f.options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: option.value,\n                      children: option.value\n                    }, option.key, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 81\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 69\n                  }, this) : /*#__PURE__*/_jsxDEV(Form.Control, {\n                    required: true,\n                    name: f.id,\n                    type: f.type === 1 ? 'text' : f.type === 2 && f.id !== 'number' || f.type === 3 && f.id !== 'number' ? 'number' : f.type === 5 ? 'date' : 'text',\n                    placeholder: f.label,\n                    maxLength: f.id === 'number' ? 7 : 55,\n                    onChange: e => fieldChanged(f.id, e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 69\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 53\n                }, this)\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 49\n              }, this)), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-2\",\n                controlId: \"value\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"text\",\n                  placeholder: \"Amount\",\n                  required: true,\n                  value: value,\n                  onChange: e => setValue(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-2\",\n                controlId: \"currency\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Currency\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  as: \"select\",\n                  required: true,\n                  value: currency,\n                  onChange: e => setCurrency(e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"USD\",\n                    children: \"USD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 12,\n            md: 6,\n            lg: 8,\n            xl: 5,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-container\",\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                sm: 12,\n                md: 12,\n                lg: 12,\n                xl: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-2\",\n                  controlId: \"number\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Card number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Card number\",\n                    required: true,\n                    className: \"cardNumber\",\n                    value: number,\n                    maxLength: \"19\",\n                    onChange: e => setNumber(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                sm: 12,\n                md: 12,\n                lg: 12,\n                xl: 12,\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    sm: 12,\n                    md: 8,\n                    lg: 6,\n                    xl: 6,\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Exp date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 294,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                      className: \"exp mb-2\",\n                      controlId: \"exp_month\",\n                      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                        type: \"text\",\n                        placeholder: \"ExpMonth\",\n                        required: true,\n                        className: \"exp-left\",\n                        value: exp_month,\n                        maxLength: \"2\",\n                        onChange: e => setExpMonth(e.target.value)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 296,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"exp-line\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 305,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                        type: \"text\",\n                        placeholder: \"ExpYear\",\n                        required: true,\n                        className: \"exp-right\",\n                        value: exp_year,\n                        maxLength: \"2\",\n                        onChange: e => setExpYear(e.target.value)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 306,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 295,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    sm: 12,\n                    md: 8,\n                    lg: 6,\n                    xl: 6,\n                    children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                      className: \"mb-2\",\n                      controlId: \"cvv\",\n                      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                        children: \"CVV\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 319,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                        type: \"text\",\n                        placeholder: \"CVV\",\n                        required: true,\n                        className: \"cvv\",\n                        value: cvv,\n                        maxLength: \"3\",\n                        onChange: e => setCvv(e.target.value)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 320,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                sm: 12,\n                md: 12,\n                lg: 12,\n                xl: 12,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"submitButton\",\n                  variant: \"primary\",\n                  type: \"submit\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 9\n  }, this);\n}\n\n_s(FormScreen, \"RIPqoD9ZElZzMsCwoPCNckgxD0o=\");\n\n_c = FormScreen;\nexport default FormScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormScreen\");","map":{"version":3,"sources":["/Users/amilabdullayev/Desktop/Projects/web-payment-app/front/src/screens/FormScreen.jsx"],"names":["React","useState","useEffect","useContext","Col","Container","Form","Row","Button","Message","Receipt","CategoryListContext","FormScreen","match","history","categoryId","params","providerId","field","setField","providers","setProviders","loading","setLoading","error","setError","number","setNumber","exp_month","setExpMonth","exp_year","setExpYear","cvv","setCvv","value","setValue","currency","setCurrency","datas","setDatas","validated","setValidated","isSubmit","setIsSubmit","dataRequest","setDataRequest","dataReceipt","setDataReceipt","showReceipt","setShowReceipt","categoryList","localData","JSON","parse","localStorage","getItem","undefined","categoryFiltered","filter","category","id","providerFiltered","provider","push","console","fieldChanged","key","currentValues","handleSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","data","fields","amount","card","requestOptions","method","headers","body","stringify","fetch","then","response","json","log","setItem","setCategories","catch","finally","receipt","handleBack","localeData","removeItem","map","f","idx","label","type","e","target","options","option"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from \"react\";\nimport {Col, Container, Form, Row, Button} from \"react-bootstrap\";\nimport Message from \"../components/Message\";\nimport Receipt from \"../components/Receipt\";\nimport {CategoryListContext} from \"../contexts/CategoryListContext\";\n\nfunction FormScreen({match, history}) {\n\n    const categoryId = match.params.categoryId;\n    const providerId = match.params.providerId;\n\n    const [field, setField] = useState();\n    const [providers, setProviders] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    // form\n    const [number, setNumber] = useState('');\n    const [exp_month, setExpMonth] = useState('');\n    const [exp_year, setExpYear] = useState('');\n    const [cvv, setCvv] = useState('');\n\n    const [value, setValue] = useState('');\n    const [currency, setCurrency] = useState('');\n\n    const [datas, setDatas] = useState({})\n\n    const [validated, setValidated] = useState(false);\n\n    const [isSubmit, setIsSubmit] = useState(false);\n\n    const [dataRequest, setDataRequest] = useState({});\n    const [dataReceipt, setDataReceipt] = useState({});\n\n    const [showReceipt, setShowReceipt] = useState(false);\n\n    // context api\n    const categoryList = useContext(CategoryListContext);\n\n    useEffect(() => {\n        try {\n            //  check local storage data\n            const localData = JSON.parse(localStorage.getItem('categoryListStorage'));\n            if (localData !== undefined && localData !== null) {\n                const categoryFiltered = localData.filter(category => category.id === +categoryId);\n                setProviders(categoryFiltered[0].providers);\n                const providerFiltered = providers.filter(provider => provider.id === +providerId);\n                setField(providerFiltered[0]);\n\n                // setIsSubmit(true);\n                // setShowReceipt(true);\n                // setDataReceipt(localData);\n            } else {\n                history.push('/');\n            }\n        } catch (error) {\n            console.error(error);\n            setError(error);\n        } finally {\n            setLoading(false);\n        }\n    }, [loading, error, isSubmit, showReceipt]);\n\n    const fieldChanged = (key, value) => {\n        setDatas(currentValues => {\n            currentValues[key] = value;\n            return currentValues;\n        });\n\n        // for (const [key, value] of Object.entries(datas)) {\n        //     setKeyData(currentValues => {\n        //         currentValues = {\n        //             k: currentValues[key],\n        //             v: value\n        //         }\n        //         return currentValues;\n        //     });\n        // }\n\n        // console.info('keyData', keyData);\n    }\n\n    const handleSubmit = (event) => {\n        setIsSubmit(true);\n        const form = event.currentTarget;\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        } else {\n            event.preventDefault();\n\n            const data = [\n                {\n                    providerId: providerId,\n                    fields: datas,\n                    amount: {\n                        value: value,\n                        currency: currency\n                    },\n                    card: {\n                        number: number,\n                        exp_month: exp_month,\n                        exp_year: exp_year,\n                        cvv: cvv\n                    }\n                }\n            ]\n\n            setDataRequest(data);\n\n            // // for generate id\n            // const generateRandomString = (length = 10) => Math.random().toString(20).substr(2, length)\n            // let randomId = generateRandomString(200);\n            //\n            // // yyyy-MM-ddTHH:mm:ss\n            // let date_ob = new Date();\n            // // adjust 0 before single digit date\n            // let date = (\"0\" + date_ob.getDate()).slice(-2);\n            // // current month\n            // let month = (\"0\" + (date_ob.getMonth() + 1)).slice(-2);\n            // // current year\n            // let year = date_ob.getFullYear();\n            // // current hours\n            // let hours = date_ob.getHours();\n            // // current minutes\n            // let minutes = date_ob.getMinutes();\n            // // current seconds\n            // let seconds = date_ob.getSeconds();\n            //\n            // const dateNow = `${year}-${month}-${date}T${hours}:${minutes}:${seconds}`;\n            //\n            // const receipt = {\n            //     id: randomId,\n            //     date: dateNow,\n            //     details: datas,\n            //     amount: {\n            //         value: value,\n            //         currency: currency\n            //     }\n            // }\n\n            const requestOptions = {\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify(dataRequest)\n            };\n\n            fetch(\"http://localhost:8080/payments/new\", requestOptions)\n                .then((response) => response.json())\n                .then((data) => {\n\n                    console.log(data);\n                    setDataReceipt(data);\n\n\n                    //  check local storage data\n                    const localData = JSON.parse(localStorage.getItem('categoryListStorage'));\n                    if (localData !== undefined && localData !== null) {\n                        localStorage.setItem('categoryListStorage', JSON.stringify(data));\n                        setCategories(localData)\n                    }\n\n                    // local storage\n                    localStorage.setItem('categoryListStorage', JSON.stringify(data));\n                    setCategories(data)\n                })\n                .catch((error) => {\n                    console.error(error);\n                    setError(error)\n                })\n                .finally(() => setLoading(false))\n\n            // local storage\n            localStorage.setItem('receiptStorage', JSON.stringify(receipt));\n\n            // eslint-disable-next-line no-unused-expressions\n            dataReceipt !== undefined && dataRequest !== undefined ? setShowReceipt(true) : setShowReceipt(false);\n\n        }\n        setValidated(true);\n    };\n\n    const handleBack = () => {\n        const localeData = JSON.parse(localStorage.getItem('receiptStorage'));\n\n        if (localeData !== undefined || true) {\n            localStorage.removeItem('receiptStorage');\n            setIsSubmit(false);\n            setShowReceipt(false);\n        }\n\n        history.push('/');\n    }\n\n    if (loading) return \"Loading...\";\n    if (error) return <Message variant=\"danger\">{error}</Message>\n\n    return (\n        <Container>\n            <Button onClick={handleBack} className=\"btn btn-light my-3\">\n                Go back\n            </Button>\n            {\n                (isSubmit && showReceipt) ? <Receipt dataReceipt={dataReceipt}/>\n                    : (\n                        <div>\n                            <Form noValidate validated={validated} onSubmit={handleSubmit}>\n                                <Row>\n                                    <Col sm={12} md={6} lg={4} xl={4}>\n                                        <div className=\"card-container\">\n                                            {field && field.fields.map((f, idx) => (\n                                                <div key={idx}>\n                                                    <Form.Group className=\"mb-2\">\n                                                        <Form.Label>{f.label}</Form.Label>\n                                                        {\n                                                            f.type === 4 ?\n                                                                (\n                                                                    <Form.Control\n                                                                        name={f.id}\n                                                                        as=\"select\"\n                                                                        required\n                                                                        onChange={(e) => fieldChanged(f.id, e.target.value)}\n                                                                    >\n                                                                        <option value=\"\">Select...</option>\n                                                                        {\n                                                                            f.options.map((option) => (\n                                                                                <option\n                                                                                    key={option.key}\n                                                                                    value={option.value}\n                                                                                >\n                                                                                    {option.value}\n                                                                                </option>\n                                                                            ))\n                                                                        }\n                                                                    </Form.Control>\n                                                                )\n                                                                : (\n                                                                    <Form.Control\n                                                                        required\n                                                                        name={f.id}\n                                                                        type={f.type === 1 ? 'text' : (f.type === 2 && f.id !== 'number') || (f.type === 3 && f.id !== 'number') ? 'number' : f.type === 5 ? 'date' : 'text'}\n                                                                        placeholder={f.label}\n                                                                        maxLength={f.id === 'number' ? 7 : 55}\n                                                                        onChange={(e) => fieldChanged(f.id, e.target.value)}\n                                                                    />\n                                                                )\n                                                        }\n                                                    </Form.Group>\n                                                </div>\n                                            ))}\n                                            <Form.Group className=\"mb-2\" controlId=\"value\">\n                                                <Form.Label>Amount</Form.Label>\n                                                <Form.Control\n                                                    type=\"text\"\n                                                    placeholder=\"Amount\"\n                                                    required\n                                                    value={value}\n                                                    onChange={(e) => setValue(e.target.value)}\n                                                />\n                                            </Form.Group>\n                                            <Form.Group className=\"mb-2\" controlId=\"currency\">\n                                                <Form.Label>Currency</Form.Label>\n                                                <Form.Control\n                                                    as=\"select\"\n                                                    required\n                                                    value={currency}\n                                                    onChange={(e) => setCurrency(e.target.value)}\n                                                >\n                                                    <option value=\"\">Select...</option>\n                                                    <option value=\"USD\">USD</option>\n                                                </Form.Control>\n                                            </Form.Group>\n                                        </div>\n                                    </Col>\n                                    <Col sm={12} md={6} lg={8} xl={5}>\n                                        <div className=\"card-container\">\n                                            <Col sm={12} md={12} lg={12} xl={12}>\n                                                <Form.Group className=\"mb-2\" controlId=\"number\">\n                                                    <Form.Label>Card number</Form.Label>\n                                                    <Form.Control\n                                                        type=\"text\"\n                                                        placeholder=\"Card number\"\n                                                        required\n                                                        className=\"cardNumber\"\n                                                        value={number}\n                                                        maxLength=\"19\"\n                                                        onChange={(e) => setNumber(e.target.value)}\n                                                    />\n                                                </Form.Group>\n                                            </Col>\n                                            <Col sm={12} md={12} lg={12} xl={12}>\n                                                <Row>\n                                                    <Col sm={12} md={8} lg={6} xl={6}>\n                                                        <Form.Label>Exp date</Form.Label>\n                                                        <Form.Group className=\"exp mb-2\" controlId=\"exp_month\">\n                                                            <Form.Control\n                                                                type=\"text\"\n                                                                placeholder=\"ExpMonth\"\n                                                                required\n                                                                className=\"exp-left\"\n                                                                value={exp_month}\n                                                                maxLength=\"2\"\n                                                                onChange={(e) => setExpMonth(e.target.value)}\n                                                            />\n                                                            <span className=\"exp-line\"/>\n                                                            <Form.Control\n                                                                type=\"text\"\n                                                                placeholder=\"ExpYear\"\n                                                                required\n                                                                className=\"exp-right\"\n                                                                value={exp_year}\n                                                                maxLength=\"2\"\n                                                                onChange={(e) => setExpYear(e.target.value)}\n                                                            />\n                                                        </Form.Group>\n                                                    </Col>\n                                                    <Col sm={12} md={8} lg={6} xl={6}>\n                                                        <Form.Group className=\"mb-2\" controlId=\"cvv\">\n                                                            <Form.Label>CVV</Form.Label>\n                                                            <Form.Control\n                                                                type=\"text\"\n                                                                placeholder=\"CVV\"\n                                                                required\n                                                                className=\"cvv\"\n                                                                value={cvv}\n                                                                maxLength=\"3\"\n                                                                onChange={(e) => setCvv(e.target.value)}\n                                                            />\n                                                        </Form.Group>\n                                                    </Col>\n                                                </Row>\n                                            </Col>\n                                            <Col sm={12} md={12} lg={12} xl={12}>\n                                                <Button className='submitButton' variant=\"primary\" type=\"submit\">\n                                                    Submit\n                                                </Button>\n                                            </Col>\n                                        </div>\n                                    </Col>\n                                </Row>\n                            </Form>\n                        </div>\n                    )\n            }\n        </Container>\n    );\n}\n\nexport default FormScreen;\n"]},"metadata":{},"sourceType":"module"}
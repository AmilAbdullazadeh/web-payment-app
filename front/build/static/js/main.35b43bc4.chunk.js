(this["webpackJsonpweb-payment-app"]=this["webpackJsonpweb-payment-app"]||[]).push([[0],{41:function(e,t,c){},42:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(16),s=c.n(r),l=(c(40),c(41),c(42),c(15)),i=c(7),o=c(6),j=c(53),d=c(54),b=c(35),u=c(58),O=c(1);var h=function(e){var t=e.category;return Object(O.jsx)(u.a,{className:"my-3 p-3 card-container rounded",children:Object(O.jsx)(u.a.Body,{children:Object(O.jsx)(l.b,{to:"/category/".concat(t.id),children:Object(O.jsx)(u.a.Title,{as:"div",children:Object(O.jsx)("strong",{children:t.name})})})})})},x=c(56);var m=function(e){var t=e.variant,c=e.children;return Object(O.jsx)(x.a,{variant:t,children:c})};var p=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!0),s=Object(o.a)(r,2),l=s[0],i=s[1],u=Object(a.useState)(null),x=Object(o.a)(u,2),p=x[0],g=x[1];return Object(a.useEffect)((function(){fetch("http://localhost:8080/payments/categories").then((function(e){return e.json()})).then((function(e){var t=JSON.parse(localStorage.getItem("categoryListStorage"));void 0!==t&&null!==t&&(localStorage.setItem("categoryListStorage",JSON.stringify(e)),n(t)),localStorage.setItem("categoryListStorage",JSON.stringify(e)),n(e)})).catch((function(e){console.error(e),g(e)})).finally((function(){return i(!1)}))}),[l,p]),l?"Loading...":p?Object(O.jsx)(m,{variant:"danger",children:p}):Object(O.jsxs)(j.a,{children:[Object(O.jsx)("h1",{children:"Categories"}),Object(O.jsx)("div",{children:Object(O.jsx)(d.a,{children:c.map((function(e){return Object(O.jsx)(b.a,{sm:12,md:6,lg:4,xl:3,children:Object(O.jsx)(h,{category:e})},e.id)}))})})]})};var g=function(e){var t=e.provider,c=e.categoryId;return Object(O.jsx)(u.a,{className:"my-3 p-3 card-container rounded",children:Object(O.jsx)(u.a.Body,{children:Object(O.jsx)(l.b,{to:"/form/".concat(c,"/").concat(t.id),children:Object(O.jsx)(u.a.Title,{as:"div",children:Object(O.jsx)("strong",{children:t.name})})})})})};var v=function(e){var t=e.match,c=e.history,n=t.params.id,r=Object(a.useState)(),s=Object(o.a)(r,2),i=(s[0],s[1]),u=Object(a.useState)(),h=Object(o.a)(u,2),x=h[0],p=h[1],v=Object(a.useState)(!0),f=Object(o.a)(v,2),y=f[0],S=f[1],N=Object(a.useState)(null),C=Object(o.a)(N,2),I=C[0],L=C[1];return Object(a.useEffect)((function(){try{var e=JSON.parse(localStorage.getItem("categoryListStorage"));if(void 0!==e&&null!==e){var t=e.filter((function(e){return e.id===+n}));i(t[0]),p(t[0])}else c.push("/")}catch(I){console.error(I),L(I)}finally{S(!1)}}),[I,y]),y?"Loading...":I?Object(O.jsx)(m,{variant:"danger",children:I}):Object(O.jsxs)(j.a,{children:[Object(O.jsx)("h1",{children:"Providers"}),Object(O.jsx)(l.b,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),Object(O.jsx)("div",{children:Object(O.jsx)(d.a,{children:x&&x.providers.map((function(e){return Object(O.jsx)(b.a,{sm:12,md:6,lg:4,xl:3,children:Object(O.jsx)(g,{categoryId:n,provider:e})},e.id)}))})})]})},f=c(55),y=c(57),S=c.p+"static/media/checked.6f298cca.png";var N=function(e){var t=e.dataReceipt;return Object(O.jsx)(j.a,{className:"d-flex justify-content-center",children:Object(O.jsxs)(u.a,{className:"my-3 p-3 card-container rounded",children:[Object(O.jsx)("img",{style:{alignSelf:"center"},width:"85",src:S,alt:"Logo"}),t&&Object(O.jsxs)(u.a.Body,{children:[Object(O.jsxs)(u.a.Title,{as:"div",children:[Object(O.jsx)("span",{className:"text-success",children:"Payment id: "})," ",Object(O.jsx)("strong",{children:t.id})]}),Object(O.jsxs)(u.a.Title,{as:"div",children:[Object(O.jsx)("span",{className:"text-success",children:"Transaction date: "})," ",Object(O.jsx)("strong",{children:t.date})]}),Object(O.jsxs)(u.a.Title,{as:"div",children:[Object(O.jsx)("span",{className:"text-success",children:"Transaction details: "}),t.details.map((function(e){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("strong",{children:[e.key,": ",e.value]})," ",Object(O.jsx)("br",{})]})}))]}),Object(O.jsxs)(u.a.Title,{as:"div",children:[Object(O.jsx)("span",{className:"text-success",children:"Amount paid: "}),Object(O.jsx)("strong",{children:"".concat(t.amount.value," ").concat(t.amount.currency)})]})]})]})})},C=[{}],I=Object(a.createContext)(C);var L=function(e){var t=e.match,c=e.history,n=t.params.categoryId,r=t.params.providerId,s=Object(a.useState)(),l=Object(o.a)(s,2),i=(l[0],l[1],Object(a.useState)()),u=Object(o.a)(i,2),h=u[0],x=u[1],p=Object(a.useState)([]),g=Object(o.a)(p,2),v=g[0],S=g[1],C=Object(a.useState)(!0),L=Object(o.a)(C,2),T=L[0],J=L[1],k=Object(a.useState)(null),q=Object(o.a)(k,2),G=q[0],B=q[1],E=Object(a.useState)(""),w=Object(o.a)(E,2),P=w[0],V=w[1],D=Object(a.useState)(""),F=Object(o.a)(D,2),A=F[0],_=F[1],M=Object(a.useState)(""),R=Object(o.a)(M,2),U=R[0],Y=R[1],z=Object(a.useState)(""),H=Object(o.a)(z,2),K=H[0],Q=H[1],W=Object(a.useState)(""),X=Object(o.a)(W,2),Z=X[0],$=X[1],ee=Object(a.useState)(""),te=Object(o.a)(ee,2),ce=te[0],ae=te[1],ne=Object(a.useState)({}),re=Object(o.a)(ne,2),se=re[0],le=re[1],ie=Object(a.useState)(!1),oe=Object(o.a)(ie,2),je=oe[0],de=oe[1],be=Object(a.useState)(!1),ue=Object(o.a)(be,2),Oe=ue[0],he=ue[1],xe=Object(a.useState)({}),me=Object(o.a)(xe,2),pe=(me[0],me[1],Object(a.useState)({})),ge=Object(o.a)(pe,2),ve=ge[0],fe=ge[1],ye=Object(a.useState)(!1),Se=Object(o.a)(ye,2),Ne=Se[0],Ce=Se[1];Object(a.useContext)(I),Object(a.useEffect)((function(){try{var e=JSON.parse(localStorage.getItem("receiptStorage")),t=JSON.parse(localStorage.getItem("categoryListStorage"));if(void 0!==e&&null!==e)he(!0),Ce(!0),fe(e);else if(void 0!==t&&null!==t){var a=t.filter((function(e){return e.id===+n}));S(a[0].providers);var s=v.filter((function(e){return e.id===+r}));x(s[0])}else c.push("/")}catch(G){console.error(G),B(G)}finally{J(!1)}}),[T,G,Oe,Ne]);var Ie=function(e,t){le((function(c){return c[e]={key:e,value:t},c}))};return T?"Loading...":G?Object(O.jsx)(m,{variant:"danger",children:G}):Object(O.jsxs)(j.a,{children:[Object(O.jsx)(f.a,{onClick:function(){JSON.parse(localStorage.getItem("receiptStorage"));localStorage.removeItem("receiptStorage"),he(!1),Ce(!1),c.push("/")},className:"btn btn-light my-3",children:"Go back"}),Oe&&Ne?Object(O.jsx)(N,{dataReceipt:ve}):Object(O.jsx)("div",{children:Object(O.jsx)(y.a,{noValidate:!0,validated:je,onSubmit:function(e){if(he(!0),!1===e.currentTarget.checkValidity())e.preventDefault(),e.stopPropagation();else{e.preventDefault();var t={providerId:+r,fields:Object.values(se),amount:{value:Z,currency:ce},card:{number:P,exp_month:A,exp_year:U,cvv:K}},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("http://localhost:8080/payments/new",c).then((function(e){return e.json()})).then((function(e){console.log("data res",e),fe(e.data),localStorage.setItem("receiptStorage",JSON.stringify(e.data)),Ce(void 0!==ve)})).catch((function(e){console.error(e),B(e)})).finally((function(){return J(!1)}))}de(!0)},children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(b.a,{sm:12,md:6,lg:4,xl:4,children:Object(O.jsxs)("div",{className:"card-container",children:[h&&h.fields.map((function(e,t){return Object(O.jsx)("div",{children:Object(O.jsxs)(y.a.Group,{className:"mb-2",children:[Object(O.jsx)(y.a.Label,{children:e.label}),4===e.type?Object(O.jsxs)(y.a.Control,{name:e.id,as:"select",required:!0,onChange:function(t){return Ie(e.id,t.target.value)},children:[Object(O.jsx)("option",{value:"",children:"Select..."}),e.options.map((function(e){return Object(O.jsx)("option",{value:e.value,children:e.value},e.key)}))]}):Object(O.jsx)(y.a.Control,{required:!0,name:e.id,type:1===e.type?"text":2===e.type&&"number"!==e.id||3===e.type&&"number"!==e.id?"number":5===e.type?"date":"text",placeholder:e.label,maxLength:"number"===e.id?7:55,onChange:function(t){return Ie(e.id,t.target.value)}})]})},t)})),Object(O.jsxs)(y.a.Group,{className:"mb-2",controlId:"value",children:[Object(O.jsx)(y.a.Label,{children:"Amount"}),Object(O.jsx)(y.a.Control,{type:"text",placeholder:"Amount",required:!0,value:Z,onChange:function(e){return $(e.target.value)}})]}),Object(O.jsxs)(y.a.Group,{className:"mb-2",controlId:"currency",children:[Object(O.jsx)(y.a.Label,{children:"Currency"}),Object(O.jsxs)(y.a.Control,{as:"select",required:!0,value:ce,onChange:function(e){return ae(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"Select..."}),Object(O.jsx)("option",{value:"USD",children:"USD"})]})]})]})}),Object(O.jsx)(b.a,{sm:12,md:6,lg:8,xl:5,children:Object(O.jsxs)("div",{className:"card-container",children:[Object(O.jsx)(b.a,{sm:12,md:12,lg:12,xl:12,children:Object(O.jsxs)(y.a.Group,{className:"mb-2",controlId:"number",children:[Object(O.jsx)(y.a.Label,{children:"Card number"}),Object(O.jsx)(y.a.Control,{type:"text",placeholder:"Card number",required:!0,className:"cardNumber",value:P,maxLength:"19",onChange:function(e){return V(e.target.value)}})]})}),Object(O.jsx)(b.a,{sm:12,md:12,lg:12,xl:12,children:Object(O.jsxs)(d.a,{children:[Object(O.jsxs)(b.a,{sm:12,md:8,lg:6,xl:6,children:[Object(O.jsx)(y.a.Label,{children:"Exp date"}),Object(O.jsxs)(y.a.Group,{className:"exp mb-2",controlId:"exp_month",children:[Object(O.jsx)(y.a.Control,{type:"text",placeholder:"ExpMonth",required:!0,className:"exp-left",value:A,maxLength:"2",onChange:function(e){return _(e.target.value)}}),Object(O.jsx)("span",{className:"exp-line"}),Object(O.jsx)(y.a.Control,{type:"text",placeholder:"ExpYear",required:!0,className:"exp-right",value:U,maxLength:"2",onChange:function(e){return Y(e.target.value)}})]})]}),Object(O.jsx)(b.a,{sm:12,md:8,lg:6,xl:6,children:Object(O.jsxs)(y.a.Group,{className:"mb-2",controlId:"cvv",children:[Object(O.jsx)(y.a.Label,{children:"CVV"}),Object(O.jsx)(y.a.Control,{type:"text",placeholder:"CVV",required:!0,className:"cvv",value:K,maxLength:"3",onChange:function(e){return Q(e.target.value)}})]})})]})}),Object(O.jsx)(b.a,{sm:12,md:12,lg:12,xl:12,children:Object(O.jsx)(f.a,{className:"submitButton",variant:"primary",type:"submit",children:"Submit"})})]})})]})})})]})};var T=function(){return Object(O.jsx)(l.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(i.a,{path:"/",component:p,exact:!0}),Object(O.jsx)(i.a,{path:"/category/:id",component:v}),Object(O.jsx)(i.a,{path:"/form/:categoryId/:providerId",component:L})]})})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,59)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};s.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(T,{})}),document.getElementById("root")),J()}},[[51,1,2]]]);
//# sourceMappingURL=main.35b43bc4.chunk.js.map